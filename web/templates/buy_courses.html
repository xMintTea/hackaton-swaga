<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Python Basics | Cyberskill</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <style>
        .course-page-container {
            padding: 150px 0 100px;
            min-height: 100vh;
        }
        
        .back-button {
            margin-bottom: 30px;
            display: inline-block;
            padding: 10px 20px;
            background: #161625;
            border: 1px solid #00eeff;
            color: #00eeff;
            text-decoration: none;
            border-radius: 5px;
            transition: all 0.3s ease;
        }
        
        .back-button:hover {
            background: #00eeff;
            color: #0a0a0f;
            box-shadow: 0 0 15px #00eeff;
        }
        
        .course-detail-wrapper {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 40px;
            margin-top: 30px;
        }
        
        .course-info-section {
            background: #161625;
            border: 2px solid #00eeff;
            border-radius: 15px;
            padding: 40px;
            box-shadow: 0 0 25px rgba(0, 238, 255, 0.2);
        }
        
        .course-icon-large {
            font-size: 4rem;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .course-title {
            font-size: 2.5rem;
            color: #00eeff;
            margin-bottom: 20px;
            text-shadow: 0 0 10px #00eeff;
            text-align: center;
        }
        
        .course-description-full {
            color: #b0b0d0;
            font-size: 1.1rem;
            line-height: 1.7;
            margin-bottom: 30px;
            padding: 0 20px;
        }
        
        .course-details-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .course-detail-item {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid rgba(0, 238, 255, 0.2);
        }
        
        .detail-label {
            font-size: 0.9rem;
            color: #b0b0d0;
            margin-bottom: 8px;
        }
        
        .detail-value {
            font-size: 1.2rem;
            color: #ffffff;
            font-weight: 600;
        }
        
        .modules-section {
            margin-top: 40px;
        }
        
        .modules-title {
            font-size: 1.5rem;
            color: #00eeff;
            margin-bottom: 20px;
            text-shadow: 0 0 8px #00eeff;
        }
        
        .modules-list {
            list-style-type: none;
            padding: 0;
        }
        
        .module-item {
            padding: 15px;
            margin-bottom: 10px;
            background: rgba(0, 0, 0, 0.2);
            border-left: 3px solid #ff00ff;
            color: #ffffff;
            transition: all 0.3s ease;
        }
        
        .module-item:hover {
            background: rgba(255, 0, 255, 0.1);
            transform: translateX(5px);
        }
        
        .purchase-sidebar {
            background: #161625;
            border: 2px solid #00eeff;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 0 25px rgba(0, 238, 255, 0.2);
            position: sticky;
            top: 150px;
            height: fit-content;
        }
        
        .price-display {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .price-label {
            color: #b0b0d0;
            font-size: 1.1rem;
            margin-bottom: 10px;
        }
        
        .price-value {
            font-size: 2.5rem;
            color: #ff00ff;
            text-shadow: 0 0 10px #ff00ff;
            font-weight: 700;
        }
        
        .buy-button {
            display: block;
            width: 100%;
            padding: 20px;
            background: linear-gradient(45deg, #ff00ff, #00eeff);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.3rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            margin-bottom: 20px;
            text-decoration: none;
        }
        
        .buy-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 0 25px rgba(255, 0, 255, 0.5);
        }
        
        .course-features {
            margin-top: 30px;
        }
        
        .feature-item {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            color: #b0b0d0;
        }
        
        .feature-icon {
            color: #00eeff;
            margin-right: 10px;
            font-size: 1.2rem;
        }
        
        @media (max-width: 1024px) {
            .course-detail-wrapper {
                grid-template-columns: 1fr;
            }
            
            .purchase-sidebar {
                position: static;
            }
        }
        
        @media (max-width: 768px) {
            .course-page-container {
                padding: 120px 0 50px;
            }
            
            .course-title {
                font-size: 2rem;
            }
            
            .course-details-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <p style="visibility: hidden;" class="course_id">{{ course.id}}</p>
    <div class="container course-page-container">
        <a href="{{ url_for('courses') }}" class="back-button">‚Üê –ù–∞–∑–∞–¥ –∫ –∫—É—Ä—Å–∞–º</a>
        
        <div class="course-detail-wrapper">
            <div class="course-info-section">
                <div class="course-icon-large">üêç</div>
                <h1 class="course-title">{{ course.name }}</h1>
                
                <div class="course-description-full">
                    –ò–∑—É—á–∏—Ç–µ –æ—Å–Ω–æ–≤—ã —Å–∞–º–æ–≥–æ –ø–æ–ø—É–ª—è—Ä–Ω–æ–≥–æ —è–∑—ã–∫–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞. –≠—Ç–æ—Ç –∫—É—Ä—Å –æ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –±–∞–∑–æ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ Python, –≤–∫–ª—é—á–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö, —É—Å–ª–æ–≤–∏—è, —Ü–∏–∫–ª—ã, —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –æ—Å–Ω–æ–≤—ã –û–û–ü. –ò–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö.
                </div>
                
                <div class="course-details-grid">
                    <div class="course-detail-item">
                        <div class="detail-label">–£—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏</div>
                        <div class="detail-value">{{ course.course_lvl.value }}</div>
                    </div>
                    
                    <div class="course-detail-item">
                        <div class="detail-label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–æ–¥—É–ª–µ–π</div>
                        <div class="detail-value">{{ course.topics | length }}</div>
                    </div>
                    
                    <div class="course-detail-item">
                        <div class="detail-label">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</div>
                        <div class="detail-value">6 –Ω–µ–¥–µ–ª—å</div>
                    </div>
                    
                    <div class="course-detail-item">
                        <div class="detail-label">–î–æ—Å—Ç—É–ø</div>
                        <div class="detail-value">–ù–∞–≤—Å–µ–≥–¥–∞</div>
                    </div>
                </div>
                
                <div class="modules-section">
                    <h3 class="modules-title">–ü—Ä–æ–≥—Ä–∞–º–º–∞ –∫—É—Ä—Å–∞</h3>
                    <ul class="modules-list">
                        {% for topic in course.topics %}
                        <li class="module-item"><strong>–ú–æ–¥—É–ª—å {{ topic.order }}:</strong> {{ topic.name }}</li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
            
            <div class="purchase-sidebar">
                <div class="price-display">
                    <div class="price-label">–°—Ç–æ–∏–º–æ—Å—Ç—å –∫—É—Ä—Å–∞</div>
                    <div class="price-value">{{ course.price }} ‚ÇΩ</div>
                </div>
                
                <button class="buy-button">
                    –ö–£–ü–ò–¢–¨ –ö–£–†–°
                </button>
                
                <div class="course-features">
                    <div class="feature-item">
                        <span class="feature-icon">‚úì</span>
                        <span>–î–æ—Å—Ç—É–ø –Ω–∞–≤—Å–µ–≥–¥–∞</span>
                    </div>
                    <div class="feature-item">
                        <span class="feature-icon">‚úì</span>
                        <span>–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞–Ω–∏—è</span>
                    </div>
                    <div class="feature-item">
                        <span class="feature-icon">‚úì</span>
                        <span>–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è</span>
                    </div>
                    <div class="feature-item">
                        <span class="feature-icon">‚úì</span>
                        <span>–î–æ—Å—Ç—É–ø —Å –ª—é–±–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        const button = document.querySelector('.buy-button');
        const course_id = document.querySelector('.course_id').textContent;
        button.addEventListener('click', async () => {
        try {
            const response = await fetch(`/courses/grant_course/${course_id}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                credentials: 'include' // –í–∞–∂–Ω–æ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ cookies
            });

            if (response.ok) {
                const result = await response.json();
                console.log('Success:', result);
                alert('–ö—É—Ä—Å —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω!');
                // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –ø—Ä–∏ —É—Å–ø–µ—Ö–µ
            } else if (response.status === 401) {
                alert('–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è');
                // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ª–æ–≥–∏–Ω–∞
                window.location.href = '/login';
            } else if (response.status === 404) {
                alert('–ö—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω');
            } else {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
        } catch (error) {
            console.error('Error:', error);
            alert('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∫—É—Ä—Å–∞');
        }

        })
    </script>
</body>
</html>