<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ user.nickname }}</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/main.css">
    <link rel="stylesheet" href="/static/css/profile.css">
    <!-- –ê–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è —Å–µ–∫—Ü–∏–π -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
</head>
<body>
    <div class="matrix-rain" id="matrixRain"></div>
    
    <!-- –ó–∞–ø–æ–ª–Ω–∏—Ç–µ–ª—å –¥–ª—è header -->
    <div id="header-placeholder"></div>
    
    <div class="container profile-page-container">
        <a href="/" class="btn back-button">‚Üê –ù–∞–∑–∞–¥ –Ω–∞ –≥–ª–∞–≤–Ω—É—é</a>
        
        <div class="profile-header">
            <div class="avatar-container">
                <div class="avatar-frame" id="avatarFrame">
                    <img src="/static/img/avatars/avatar1.jpg" alt="–ê–≤–∞—Ç–∞—Ä" class="avatar" id="userAvatar">
                </div>
                <div class="avatar-controls">
                    <button class="btn btn-small" id="changeAvatarBtn">–°–º–µ–Ω–∏—Ç—å –∞–≤–∞—Ç–∞—Ä</button>
                    <button class="btn btn-small" id="changeFrameBtn">–°–º–µ–Ω–∏—Ç—å —Ä–∞–º–∫—É</button>
                </div>
            </div>
            
            <div class="profile-info">
                <h1 class="username" id="username">{{ user.nickname }}</h1>
                <span class="user-title" id="userTitle">{{ user.title.name }}</span>
                
                <div class="level-progress">
                    <div class="level-info">
                        <span class="level-label">–£—Ä–æ–≤–µ–Ω—å</span>
                        <span class="level-number" id="userLevel">{{ user.lvl }}</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill" style="width: {{ user.xp }}%;"></div>
                    </div>
                    <div class="xp-info">
                        <span id="currentXP">{{ user.xp }}</span>
                        <span>/</span>
                        <span id="nextLevelXP">100</span>
                        <span>XP</span>
                    </div>
                </div>
                
                <div class="currency">
                    <span class="currency-icon">‚ìí</span>
                    <span id="userCurrency">{{ user.currency }}</span>
                </div>
            </div>
        </div>
        
        <div class="profile-content">
            <div class="profile-section">
                <div class="section-header">
                    <h2 data-translate="description">–û —Å–µ–±–µ</h2>
                    <button class="btn btn-small" id="editDescriptionBtn" data-translate="edit">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                </div>
                <div class="section-content">
                    <p class="user-description" id="userDescription">–ò–∑—É—á–∞—é Python –∏ –∫–∏–±–µ—Ä–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å. –ú–µ—á—Ç–∞—é —Å—Ç–∞—Ç—å –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–º —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–º.</p>
                    <div class="edit-description" id="editDescriptionForm" style="display: none;">
                        <textarea id="descriptionInput" rows="4" maxlength="500"></textarea>
                        <div class="edit-controls">
                            <button class="btn btn-small" id="saveDescriptionBtn" data-translate="save">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                            <button class="btn btn-small btn-pink" id="cancelDescriptionBtn" data-translate="cancel">–û—Ç–º–µ–Ω–∞</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="profile-section">
                <div class="section-header">
                    <h2 data-translate="social_links">–°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–≤—è–∑–∏</h2>
                    <button class="btn btn-small" id="editSocialsBtn" data-translate="edit">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                </div>
                <div class="section-content">
                    <div class="social-links-list" id="socialLinks">
                        <div class="social-link-item">
                            <span class="social-icon">üì∫</span>
                            <span class="social-url">youtube.com/user/neo_matrix</span>
                        </div>
                        <div class="social-link-item">
                            <span class="social-icon">üêô</span>
                            <span class="social-url">github.com/neo_matrix</span>
                        </div>
                    </div>
                    <div class="edit-socials" id="editSocialsForm" style="display: none;">
                        <div class="social-input-group">
                            <select id="socialTypeSelect">
                                <option value="youtube">YouTube</option>
                                <option value="github">GitHub</option>
                                <option value="telegram">Telegram</option>
                                <option value="vk">VK</option>
                                <option value="other">–î—Ä—É–≥–æ–µ</option>
                            </select>
                            <input type="text" id="socialUrlInput" placeholder="URL –∏–ª–∏ username">
                            <button class="btn btn-small" id="addSocialBtn" data-translate="add">–î–æ–±–∞–≤–∏—Ç—å</button>
                        </div>
                        <div class="edit-controls">
                            <button class="btn btn-small" id="saveSocialsBtn" data-translate="save">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                            <button class="btn btn-small btn-pink" id="cancelSocialsBtn" data-translate="cancel">–û—Ç–º–µ–Ω–∞</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="profile-section">
                <div class="section-header">
                    <h2 data-translate="privacy_settings">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏</h2>
                </div>
                <div class="section-content">
                    <div class="privacy-setting">
                        <label class="toggle-switch">
                            <input type="checkbox" id="profileVisibilityToggle">
                            <span class="slider"></span>
                        </label>
                        <span class="privacy-label">–°–∫—Ä—ã—Ç—å –ø—Ä–æ—Ñ–∏–ª—å –æ—Ç –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</span>
                    </div>
                </div>
            </div>
            
            <div class="profile-section">
                <div class="section-header">
                    <h2 data-translate="my_courses">–ú–æ–∏ –∫—É—Ä—Å—ã</h2>
                </div>
                <div class="section-content">
                    <div class="courses-tabs">
                        <button class="tab-btn active" data-tab="current" data-translate="current">–¢–µ–∫—É—â–∏–µ</button>
                        <button class="tab-btn" data-tab="completed" data-translate="completed">–ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ</button>
                    </div>
                    
                    
                    {% if user.course %}

                    <div class="tab-content active" id="currentCourses">
                        <div class="course-progress-item">
                            <div class="course-icon">üêç</div>
                            <div class="course-details">
                                <h3>{{ user.course.title }}</h3>
                                <p>–ü—Ä–æ–≥—Ä–µ—Å—Å: 42%</p>
                                <div class="mini-progress-bar">
                                    <div class="mini-progress-fill" style="width: 42%;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="tab-content" id="completedCourses">
                        <p>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –∫—É—Ä—Å–æ–≤.</p>
                    </div>
                </div>
            </div>

            {% else %}
            {% endif %}
            
            <div class="profile-section">
                <div class="section-header">
                    <h2 data-translate="achievements">–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h2>
                    <button class="btn btn-small" data-translate="view_all">–í—Å–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è</button>
                </div>
                <div class="section-content">
                    <div class="achievements-grid">
                        {% for ach in user.achievements %}
                        <div class="achievement-item">
                            <div class="achievement-icon">‚≠ê</div>
                            <div class="achievement-info">
                                <h4>{{ ach.name }}</h4>
                                <p>{{ ach.description }}</p>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
            
            <div class="profile-section">
                <div class="section-header">
                    <h2 data-translate="shop">–ú–∞–≥–∞–∑–∏–Ω</h2>
                    <div class="currency">
                        <span class="currency-icon">‚ìí</span>
                        <span id="shopCurrency">{{ user.currency }}</span>
                    </div>
                </div>
                <div class="section-content">
                    <div class="shop-tabs">
                        <button class="tab-btn active" data-tab="avatars" data-translate="avatars">–ê–≤–∞—Ç–∞—Ä—ã</button>
                        <button class="tab-btn" data-tab="frames" data-translate="frames">–†–∞–º–∫–∏</button>
                        <button class="tab-btn" data-tab="titles" data-translate="titles">–¢–∏—Ç—É–ª—ã</button>
                    </div>
                    
                    <div class="tab-content active" id="shopAvatars">
                        <div class="shop-items-grid">
                            <div class="shop-item owned">
                                <div class="item-icon">
                                    <img src="/static/img/avatars/avatar1.jpg" alt="–ê–≤–∞—Ç–∞—Ä 1">
                                </div>
                                <div class="item-info">
                                    <h4>–ë–∞–∑–æ–≤—ã–π –∞–≤–∞—Ç–∞—Ä</h4>
                                    <p>–í–∞—à —Ç–µ–∫—É—â–∏–π –∞–≤–∞—Ç–∞—Ä</p>
                                </div>
                            </div>
                            <div class="shop-item">
                                <div class="item-icon">
                                    <img src="/static/img/avatars/avatar2.jpg" alt="–ê–≤–∞—Ç–∞—Ä 2">
                                </div>
                                <div class="item-info">
                                    <h4>–ö–∏–±–µ—Ä-–∞–≤–∞—Ç–∞—Ä</h4>
                                    <div class="item-price">
                                        <span class="currency-icon">‚ìí</span>
                                        <span>500</span>
                                    </div>
                                </div>
                                <button class="btn btn-small">–ö—É–ø–∏—Ç—å</button>
                            </div>
                            <div class="shop-item">
                                <div class="item-icon">
                                    <img src="/static/img/avatars/avatar3.jpg" alt="–ê–≤–∞—Ç–∞—Ä 3">
                                </div>
                                <div class="item-info">
                                    <h4>–•–∞–∫–µ—Ä—Å–∫–∏–π –∞–≤–∞—Ç–∞—Ä</h4>
                                    <div class="item-price">
                                        <span class="currency-icon">‚ìí</span>
                                        <span>750</span>
                                    </div>
                                </div>
                                <button class="btn btn-small">–ö—É–ø–∏—Ç—å</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="tab-content" id="shopFrames">
                        <div class="shop-items-grid">
                            <div class="shop-item owned">
                                <div class="item-icon frame-icon">
                                    <div class="basic-frame">
                                        <img src="/static/img/avatars/avatar1.jpg" alt="–ë–∞–∑–æ–≤–∞—è —Ä–∞–º–∫–∞">
                                    </div>
                                </div>
                                <div class="item-info">
                                    <h4>–ë–∞–∑–æ–≤–∞—è —Ä–∞–º–∫–∞</h4>
                                    <p>–í–∞—à–∞ —Ç–µ–∫—É—â–∞—è —Ä–∞–º–∫–∞</p>
                                </div>
                            </div>
                            <div class="shop-item">
                                <div class="item-icon frame-icon">
                                    <div class="premium-frame">
                                        <img src="/static/img/avatars/avatar1.jpg" alt="–ó–æ–ª–æ—Ç–∞—è —Ä–∞–º–∫–∞">
                                    </div>
                                </div>
                                <div class="item-info">
                                    <h4>–ó–æ–ª–æ—Ç–∞—è —Ä–∞–º–∫–∞</h4>
                                    <div class="item-price">
                                        <span class="currency-icon">‚ìí</span>
                                        <span>1200</span>
                                    </div>
                                </div>
                                <button class="btn btn-small">–ö—É–ø–∏—Ç—å</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="tab-content" id="shopTitles">
                        <div class="shop-items-grid">
                            <div class="shop-item owned">
                                <div class="item-icon">üè∑Ô∏è</div>
                                <div class="item-info">
                                    <h4>–ù–æ–≤–∏—á–æ–∫ –≤ –∫–∏–±–µ—Ä–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ</h4>
                                    <p>–í–∞—à —Ç–µ–∫—É—â–∏–π —Ç–∏—Ç—É–ª</p>
                                </div>
                            </div>
                            <div class="shop-item">
                                <div class="item-icon">üè∑Ô∏è</div>
                                <div class="item-info">
                                    <h4>–ö–∏–±–µ—Ä-–ø–∏–æ–Ω–µ—Ä</h4>
                                    <div class="item-price">
                                        <span class="currency-icon">‚ìí</span>
                                        <span>800</span>
                                    </div>
                                </div>
                                <button class="btn btn-small">–ö—É–ø–∏—Ç—å</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- –ó–∞–ø–æ–ª–Ω–∏—Ç–µ–ª—å –¥–ª—è footer -->
    <div id="footer-placeholder"></div>

    <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
    <div class="modal" id="loginModal">
        <div class="modal-content">
            <button class="close-modal" id="closeLoginModal">&times;</button>
            <h2 class="modal-title">–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</h2>
            <form id="loginForm">
                <div class="form-group">
                    <label for="loginEmail">Email</label>
                    <input type="email" id="loginEmail" required>
                </div>
                <div class="form-group">
                    <label for="loginPassword">–ü–∞—Ä–æ–ª—å</label>
                    <input type="password" id="loginPassword" required>
                </div>
                <button type="submit" class="btn" style="width: 100%;">–í–æ–π—Ç–∏</button>
                
                <div style="text-align: center; margin-top: 15px;">
                    <button id="forgotPasswordBtn" class="btn-link">–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?</button>
                </div>
            </form>
        </div>
    </div>

    <div class="modal" id="registerModal">
        <div class="modal-content">
            <button class="close-modal" id="closeRegisterModal">&times;</button>
            <h2 class="modal-title">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
            <form id="registerForm">
                <div class="form-group">
                    <label for="registerName">–ò–º—è</label>
                    <input type="text" id="registerName" required>
                </div>
                <div class="form-group">
                    <label for="registerEmail">Email</label>
                    <input type="email" id="registerEmail" required>
                </div>
                <div class="form-group">
                    <label for="registerPassword">–ü–∞—Ä–æ–ª—å</label>
                    <input type="password" id="registerPassword" required>
                </div>
                <div class="form-group">
                    <label for="registerConfirmPassword">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è</label>
                    <input type="password" id="registerConfirmPassword" required>
                </div>
                
                <!-- –°–µ–∫—Ü–∏—è –¥–ª—è –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π/–∞–¥–º–∏–Ω–æ–≤ -->
                <div id="adminSection" style="display: none;">
                    <div class="form-group">
                        <label for="secretCode">–°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–¥</label>
                        <input type="password" id="secretCode" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–¥">
                    </div>
                    <div class="form-group">
                        <label for="userRole">–†–æ–ª—å</label>
                        <select id="userRole">
                            <option value="student">–°—Ç—É–¥–µ–Ω—Ç</option>
                            <option value="teacher">–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å</option>
                            <option value="admin">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</option>
                        </select>
                    </div>
                </div>
                
                <button type="submit" class="btn" style="width: 100%;">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
            </form>
            
            <div style="text-align: center; margin-top: 15px;">
                <button id="toggleAdminBtn" class="btn-link">–í—ã –Ω–µ —É—á–µ–Ω–∏–∫?</button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è -->
    <div class="modal" id="forgotPasswordModal">
        <div class="modal-content">
            <button class="close-modal" id="closeForgotPasswordModal">&times;</button>
            <h2 class="modal-title">–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è</h2>
            <form id="forgotPasswordForm">
                <div class="form-group">
                    <label for="forgotPasswordEmail">Email</label>
                    <input type="email" id="forgotPasswordEmail" required>
                </div>
                <button type="submit" class="btn" style="width: 100%;">–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞—Ä–æ–ª—å</button>
            </form>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—ã–±–æ—Ä–∞ –∞–≤–∞—Ç–∞—Ä–∞ -->
    <div class="modal" id="avatarModal">
        <div class="modal-content">
            <button class="close-modal" id="closeAvatarModal">&times;</button>
            <h2 class="modal-title">–í—ã–±–æ—Ä –∞–≤–∞—Ç–∞—Ä–∞</h2>
            <div class="avatars-grid">
                <div class="avatar-option selected">
                    <img src="/static/img/avatars/avatar1.jpg" alt="–ê–≤–∞—Ç–∞—Ä 1">
                </div>
                <div class="avatar-option">
                    <img src="/static/img/avatars/avatar2.jpg" alt="–ê–≤–∞—Ç–∞—Ä 2">
                </div>
                <div class="avatar-option">
                    <img src="/static/img/avatars/avatar3.jpg" alt="–ê–≤–∞—Ç–∞—Ä 3">
                </div>
                <div class="avatar-option locked">
                    <img src="/static/img/avatars/avatar4.jpg" alt="–ê–≤–∞—Ç–∞—Ä 4">
                    <div class="lock-overlay">üîí</div>
                </div>
            </div>
            <button class="btn" id="confirmAvatarBtn">–í—ã–±—Ä–∞—Ç—å</button>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π -->
    <div class="modal" id="achievementsModal">
        <div class="modal-content">
            <button class="close-modal" id="closeAchievementsModal">&times;</button>
            <h2 class="modal-title">–í—Å–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h2>
            <div class="achievements-grid" id="allAchievements">
                                        {% for ach in user.achievements %}
                        <div class="achievement-item">
                            <div class="achievement-icon">‚≠ê</div>
                            <div class="achievement-info">
                                <h4>{{ ach.name }}</h4>
                                <p>{{ ach.description }}</p>
                            </div>
                        </div>
                        {% endfor %}
            </div>
        </div>
    </div>



    <script src="/static/js/auth.js"></script>
    <script src="/static/js/templateLoader.js"></script>
    <script src="/static/js/profile.js"></script>
    <script src="/static/js/script.js"></script>
</body>
</html>